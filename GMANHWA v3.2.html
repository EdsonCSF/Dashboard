<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Gerenciador de Manhwa/Mangá</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Rock+Salt&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Cores futuristas (tema V1.2/V1.4) */
            --primary-bg: #1a1a2e;
            --secondary-bg: #16213e;
            --accent-color: #e94560;
            --text-color-futuristic: #e0e0e0;
            --border-color-futuristic: #0f3460;
            --hover-color-futuristic: #00bcd4;
            --modal-bg: rgba(0, 0, 0, 0.7);
            /* Cores dos botões internas aos cards (baseado na V1.3) */
            --button-card-access-bg: #3498db;
            --button-card-edit-bg: #f39c12;
            --button-card-delete-bg: #e74c3c;
            --button-card-toggle-status-bg: #8e44ad;
            --button-card-access-hover: #2980b9;
            --button-card-edit-hover: #e67e22;
            --button-card-delete-hover: #c0392b;
            --button-card-toggle-status-hover: #9b59b6;
            --button-card-favorite-on: #ffd700;
            --button-card-favorite-off: #ccc;
            --button-increment-bg: #2ecc71;
            --button-increment-hover: #27ae60;
            /* CORES PARA CARDS DE FUNDO PRETO */
            --card-bg-dark: #000;
            --text-color-light: #f0f0f0;
            --gray-text-dark: #bbb;
            /* CORES DO NOVO TÍTULO / LOGO - AJUSTADAS */
            --logo-bg-color: #000;
            --logo-border-color: #e74c3c;
            /* Borda vermelha para o cabeçalho */
            --logo-h1-color: #f1c40f;
            /* Título principal amarelo */
            --logo-h2-color: #e74c3c;
            /* Subtítulo vermelho */
            /* CORES DAS ABAS - NOVAS */
            --tab-bg-color: #34495e;
            /* Azul bonito para o fundo das abas */
            --tab-border-color: #ecf0f1;
            /* Borda branca para as abas */
            --tab-text-color: #fff;
            /* Texto branco nas abas */
            --tab-active-bg-color: #ecf0f1;
            /* Fundo branco para a aba ativa */
            --tab-active-text-color: #2c3e50;
            /* Texto azul escuro na aba ativa */
            /* CORES DA BARRA DE PROGRESSO */
            --progress-bg: #333;
            --progress-fill: #2ecc71;
            --progress-border: #555;
            /* CORES DO BOTÃO DE COMPARTILHAR */
            --button-card-share-bg: #2980b9;
            --button-card-share-hover: #3498db;
        }
        /* Reset básico para consistência entre navegadores */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at center, #0a0016 0%, #000018 100%);
            color: var(--text-color-futuristic);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 0;
        }
        header {
            background-color: var(--logo-bg-color);
            color: var(--text-color-futuristic);
            padding: 0;
            text-align: center;
            border-bottom: 2px solid var(--tab-border-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 250px; /* Aumentei a altura para dar mais espaço à imagem */
            overflow: hidden;
            position: relative;
        }
        .logo-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px; /* Adicionei padding para dar mais espaço */
            background: none;
            border: none;
            box-shadow: none;
            max-width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
        }
        .logo-container img {
            max-width: 100%;
            max-height: auto;
            width: auto;
            height: auto;
            object-fit: contain; /* Voltei para contain para mostrar a imagem inteira */
            object-position: center; /* Centraliza a imagem */
        }
        /* Menu Mobile Responsivo */
        .mobile-menu {
            display: none;
            background: var(--secondary-bg);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .mobile-menu-btn {
            background: none;
            border: none;
            color: var(--text-color-futuristic);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background 0.3s;
        }
        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .mobile-nav {
            display: none;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
            background: var(--primary-bg);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color-futuristic);
            position: relative;
            z-index: 1000;
        }
        .mobile-nav.show {
            display: flex;
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .mobile-nav a {
            color: var(--text-color-futuristic);
            text-decoration: none;
            padding: 0.8rem;
            border-radius: 4px;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .mobile-nav a:hover {
            background: rgba(255, 255, 255, 0.1);
            padding-left: 1.2rem;
        }
        .mobile-nav a.active {
            background: var(--accent-color);
            color: white;
        }
        /* ESTILO DAS ABAS */
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            background: var(--tab-bg-color);
            border-bottom: 2px solid var(--tab-border-color);
            padding: 0 1rem;
        }
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-family: 'Bangers', cursive;
            background: none;
            border: none;
            color: var(--tab-text-color);
            font-size: 1.4em;
            text-shadow: none;
            transition: all 0.3s ease;
            flex-grow: 1;
            text-align: center;
            border-right: 1px solid var(--tab-border-color);
            border-left: 1px solid var(--tab-border-color);
        }
        .tab[data-target="favorites-list-section"] {
            color: var(--logo-h1-color);
        }
        .tab[data-target="favorites-list-section"].active {
            background: var(--logo-h1-color);
            color: #000;
        }
        .tab.active {
            background: var(--tab-active-bg-color);
            color: var(--tab-active-text-color);
            text-shadow: none;
            font-weight: bold;
            border-color: var(--tab-active-bg-color);
        }
        .tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.1);
        }
        /* FIM DO ESTILO DAS ABAS */
        main {
            flex-grow: 1;
            padding: 1rem;
            max-width: 1200px;
            margin: 1rem auto;
            background-color: transparent;
            border-radius: 10px;
            box-shadow: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .content-section {
            width: 100%;
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: transparent;
            border-radius: 8px;
            border: none;
            box-shadow: none;
        }
        .content-section.hidden {
            display: none;
        }
        .sub-section-container {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }
        .sub-section-container.hidden {
            display: none;
        }
        h2,
        .content-section h3 {
            font-family: 'Orbitron', sans-serif;
            color: var(--logo-border-color);
            font-size: 2em;
            margin-bottom: 1.5rem;
            text-align: center;
            text-shadow: 0 0 5px rgba(231, 76, 60, 0.5);
        }
        .section-counter {
            font-size: 0.6em;
            color: var(--text-color-light);
            font-weight: normal;
            margin-left: 10px;
        }
        .content-section h3 {
            font-size: 1.5em;
            margin-bottom: 1rem;
            text-align: left;
            text-shadow: 0 0 8px var(--logo-border-color);
            color: var(--logo-border-color);
        }
        .content-section p {
            margin-bottom: 15px;
            color: var(--text-color-futuristic);
        }
        #manga-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            align-items: end;
        }
        .form-group {
            margin-bottom: 0.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-color-futuristic);
            font-weight: bold;
        }
        .form-group input[type="text"],
        .form-group input[type="url"],
        .form-group select,
        textarea {
            width: 100%;
            padding: 1rem;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color-futuristic);
            border-radius: 5px;
            color: var(--text-color-futuristic);
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
            appearance: none;
            -webkit-appearance: none;
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20256%20256%22%3E%3Cpath%20fill%3D%22%23e0e0e0%22%20d%3D%22M208%2096L128%20176L48%2096Z%22%2F%3E%3C%2Fsvg%3E');
        }
        .form-group input[type="text"][id$="-chapter"],
        .modal-content .form-group input[type="text"][id^="edit-manga-"][id$="-chapter"] {
            background-image: none;
            text-align: center;
        }
        .form-group input:focus,
        .form-group select:focus,
        textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }
        .form-group input:invalid,
        .form-group select:invalid {
            border-color: #e74c3c;
        }
        .form-group input:valid,
        .form-group select:valid {
            border-color: #2ecc71;
        }
        .manga-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 8px;
            padding: 0;
            margin: 0 auto;
            width: 100%;
        }
        #no-manga-message-reading,
        #no-manga-message-finished,
        #no-manga-message-future,
        #no-manga-message-favorites,
        #no-notes-message {
            text-align: center;
            grid-column: 1 / -1;
            font-size: 1.1em;
            color: var(--text-color-light);
            opacity: 0.8;
            padding: 1.5rem;
            border: 1px dashed #555;
            border-radius: 8px;
            background-color: var(--card-bg-dark);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .manga-card {
            background: linear-gradient(145deg, #1e1e2e, #2a2a3e);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            box-shadow: none;
            padding: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            overflow: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            margin-bottom: 5px;
        }
        .manga-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
        }
        .manga-card-image-wrapper {
            width: 100%;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-radius: 4px;
            margin-bottom: 8px;
            background-color: #333;
            position: relative;
            color: #777;
            font-size: 1em;
            text-align: center;
            padding: 5px;
            flex-direction: column;
            gap: 5px;
        }
        .manga-card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }
        .hidden {
            display: none !important;
        }
        .manga-card-placeholder-text {
            color: #777;
            font-size: 1.1em;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            user-select: none;
            line-height: 1.2;
        }
        .manga-card-placeholder-text p {
            margin: 0;
            padding: 0;
        }
        .manga-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            margin: 3px 0;
            color: var(--text-color-light);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            width: 100%;
            padding: 0 3px;
            font-weight: 700;
            line-height: 1.2;
            min-height: 2.2em;
            letter-spacing: 0.5px;
        }
        .manga-progress-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin: 3px 0;
            width: 100%;
            padding: 0 3px;
        }
        .manga-progress {
            font-size: 0.8em;
            color: var(--gray-text-dark);
            margin: 0;
        }
        .btn-increment-chapter {
            background-color: var(--button-increment-bg);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.5em;
            font-weight: bold;
        }
        .btn-increment-chapter:hover {
            background-color: var(--button-increment-hover);
            transform: scale(1.1);
        }
        .manga-last-read {
            font-size: 0.75em;
            color: var(--gray-text-dark);
            margin: 2px 0;
            width: 100%;
            padding: 0 3px;
        }
        /* Barra de Progresso */
        .progress-bar-container {
            width: 100%;
            height: 6px;
            background-color: var(--progress-bg);
            border-radius: 3px;
            margin: 5px 0;
            overflow: hidden;
            border: 1px solid var(--progress-border);
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--progress-fill), #27ae60);
            border-radius: 2px;
            transition: width 0.5s ease;
            position: relative;
        }
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg,
                    rgba(255, 255, 255, 0.2) 25%,
                    transparent 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.2) 75%,
                    transparent 75%,
                    transparent);
            background-size: 20px 20px;
            animation: progress-animation 1s linear infinite;
        }
        @keyframes progress-animation {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 20px 20px;
            }
        }
        .progress-percentage {
            font-size: 0.7em;
            color: var(--progress-fill);
            font-weight: bold;
            margin-top: 1px;
        }
        .manga-actions {
            margin-top: 5px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 3px;
            width: 100%;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.9em;
            text-decoration: none;
            transition: all 0.3s ease;
            color: white;
            width: 28px;
            height: 28px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s;
            z-index: -1;
        }
        .btn:hover::before {
            left: 0;
        }
        .btn-access {
            background-color: var(--button-card-access-bg);
            border-radius: 4px;
            width: auto;
            padding: 5px 8px;
            font-size: 0.8em;
        }
        .btn-edit {
            background-color: var(--button-card-edit-bg);
        }
        .btn-delete {
            background-color: var(--button-card-delete-bg);
        }
        .btn-share {
            background-color: var(--button-card-share-bg);
        }
        .btn-share:hover {
            background-color: var(--button-card-share-hover);
        }
        .toggle-status-btn {
            background-color: var(--button-card-toggle-status-bg);
            border-radius: 4px;
            width: auto;
            padding: 5px 8px;
            font-size: 0.75em;
        }
        .btn-move-to-reading {
            background-color: var(--button-card-toggle-status-bg);
            border-radius: 4px;
            width: auto;
            padding: 5px 8px;
            font-size: 0.75em;
        }
        .btn-access:hover {
            background-color: var(--button-card-access-hover);
        }
        .btn-edit:hover {
            background-color: var(--button-card-edit-hover);
        }
        .btn-delete:hover {
            background-color: var(--button-card-delete-hover);
        }
        .toggle-status-btn:hover {
            background-color: var(--button-card-toggle-status-hover);
        }
        .btn-move-to-reading:hover {
            background-color: var(--button-card-toggle-status-hover);
        }
        .btn-favorite {
            background: none;
            border: none;
            padding: 3px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            color: var(--button-card-favorite-off);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-favorite.active {
            color: var(--button-card-favorite-on);
        }
        .btn-favorite:hover {
            transform: scale(1.2);
        }
        footer {
            background-color: var(--secondary-bg);
            color: var(--text-color-futuristic);
            text-align: center;
            padding: 1.5rem 0;
            margin-top: auto;
            border-top: 2px solid var(--border-color-futuristic);
            box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.3);
            font-size: 0.9em;
        }
        footer p:first-child {
            margin-bottom: 0.5rem;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: var(--modal-bg);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            padding-top: 60px;
        }
        .modal-content {
            background-color: var(--primary-bg);
            margin: 5% auto;
            padding: 2.5rem;
            border: 1px solid var(--border-color-futuristic);
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6);
            position: relative;
            animation: fadeInScale 0.3s ease-out;
            color: var(--text-color-futuristic);
        }
        .modal-content h2 {
            color: var(--accent-color);
        }
        .close-button {
            color: var(--text-color-futuristic);
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close-button:hover,
        .close-button:focus {
            color: var(--accent-color);
            text-decoration: none;
        }
        .modal-content .form-group input,
        .modal-content .form-group select {
            background-color: var(--secondary-bg);
            border-color: var(--border-color-futuristic);
            color: var(--text-color-futuristic);
        }
        .modal-content button {
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1.5rem;
        }
        .modal-content button:hover {
            background-color: var(--hover-color-futuristic);
            transform: translateY(-2px);
        }
        #tools-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .tools-buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .tool-btn {
            font-family: 'Bangers', cursive;
            background-color: var(--tab-bg-color);
            color: var(--tab-text-color);
            padding: 1rem 2rem;
            border: 2px solid var(--tab-border-color);
            border-radius: 8px;
            font-size: 1.4em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-grow: 1;
            max-width: 300px;
            text-align: center;
            text-shadow: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .tool-btn:hover {
            background-color: var(--tab-active-bg-color);
            color: var(--tab-active-text-color);
            border-color: var(--tab-active-text-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        .form-action-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        .centered-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .centered-content .tool-btn {
            margin-top: 15px;
            max-width: 300px;
        }
        .centered-content p {
            max-width: 600px;
            margin: 0 auto;
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 1rem;
            margin-bottom: 1rem;
            justify-content: center;
        }
        .checkbox-container input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border: 2px solid var(--logo-border-color);
            border-radius: 5px;
            background-color: var(--secondary-bg);
            cursor: pointer;
            position: relative;
            outline: none;
        }
        .checkbox-container input[type="checkbox"]:checked {
            background-color: var(--logo-border-color);
            border-color: var(--logo-border-color);
        }
        .checkbox-container input[type="checkbox"]:checked::after {
            content: '\2713';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            color: var(--logo-bg-color);
        }
        .checkbox-container label {
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
        }
        /* --- NOVO ESTILO PARA NOTAS --- */
        .notes-list {
            display: grid;
            gap: 20px;
        }
        .note-card {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color-futuristic);
            border-radius: 8px;
            padding: 20px;
            word-wrap: break-word;
            white-space: pre-wrap;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .note-card h4 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent-color);
            margin-bottom: 10px;
            font-size: 1.2em;
            border-bottom: 1px solid var(--border-color-futuristic);
            padding-bottom: 5px;
        }
        .note-card p {
            color: var(--text-color-futuristic);
            font-size: 1em;
            margin-bottom: 10px;
        }
        .note-card .note-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 15px;
        }
        .note-card .btn-edit-note,
        .note-card .btn-delete-note {
            padding: 5px 10px;
            font-size: 0.9em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .note-card .btn-edit-note {
            background-color: var(--button-card-edit-bg);
            color: white;
            border: none;
        }
        .note-card .btn-delete-note {
            background-color: var(--button-card-delete-bg);
            color: white;
            border: none;
        }
        .note-card .btn-edit-note:hover {
            background-color: var(--button-card-edit-hover);
        }
        .note-card .btn-delete-note:hover {
            background-color: var(--button-card-delete-hover);
        }
        .note-timestamp {
            font-size: 0.8em;
            color: var(--gray-text-dark);
            text-align: right;
        }
        /* Sistema de Notificações */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-bg);
            color: var(--text-color-futuristic);
            padding: 1rem 1.5rem;
            border-left: 4px solid var(--accent-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
            max-width: 300px;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        #close-notification {
            background: none;
            border: none;
            color: var(--text-color-futuristic);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        #close-notification:hover {
            color: var(--accent-color);
        }
        /* Responsividade */
        @media (max-width: 768px) {
            .mobile-menu {
                display: block;
            }
            .tabs {
                display: none;
            }
            .manga-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 6px;
            }
            .manga-card-image-wrapper {
                height: 180px;
            }
            .manga-actions {
                flex-direction: row;
                flex-wrap: wrap;
            }
            .btn {
                min-width: 28px;
                width: 28px;
                height: 28px;
            }
            .btn-access {
                width: auto;
                padding: 5px 8px;
                font-size: 0.8em;
            }
            .toggle-status-btn, .btn-move-to-reading {
                width: 100%;
                padding: 5px 8px;
                font-size: 0.75em;
            }
            .modal-content {
                padding: 1.5rem;
                margin: 10% auto;
            }
            .nav-button {
                font-size: 1.2em;
                padding: 0.8rem 1.5rem;
            }
            header {
                height: 180px; /* Reduzir altura em dispositivos móveis */
            }
            .logo-container {
                padding: 15px;
            }
        }
        @media (max-width: 600px) {
            .logo-container {
                padding: 10px;
            }
            header {
                height: 150px; /* Reduzir ainda mais em telas muito pequenas */
            }
        }
        @media (max-width: 480px) {
            .manga-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 5px;
            }
            .manga-card-image-wrapper {
                height: 150px;
            }
            .manga-title {
                font-size: 0.8em;
            }
            .btn {
                font-size: 0.8em;
                padding: 4px;
            }
            .modal-content {
                padding: 1.5rem;
                margin: 10% auto;
                width: 95%;
            }
            header {
                height: 120px; /* Altura mínima para dispositivos muito pequenos */
            }
            .logo-container {
                padding: 5px;
            }
        }
        @media (min-width: 481px) and (max-width: 767px) {
            .manga-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 7px;
            }
        }
        @media (min-width: 768px) {
            .manga-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 8px;
            }
        }
    </style>
<script type="module" src="firebase-cards.js"></script>
<style>
#scrollTopBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 999;
  font-size: 18px;
  padding: 10px 14px;
  border: none;
  border-radius: 50%;
  background: #007bff;
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
#scrollTopBtn:hover {
  background: #0056b3;
}
</style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="imagens/titulo.jpg" alt="Meu Gerenciador de Manhwa/Mangá">
        </div>
    </header>
    <div class="mobile-menu">
        <button class="mobile-menu-btn" id="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>
        <nav class="mobile-nav" id="mobile-nav">
            <a href="#" data-target="reading-list-section"><i class="fas fa-book-open"></i> Lendo</a>
            <a href="#" data-target="finished-list-section"><i class="fas fa-check-circle"></i> Lidos</a>
            <a href="#" data-target="future-list-section"><i class="fas fa-clock"></i> Ler Futuramente</a>
            <a href="#" data-target="favorites-list-section"><i class="fas fa-star"></i> Favoritos</a>
            <a href="#" data-target="tools-section"><i class="fas fa-tools"></i> Ferramentas</a>
            <a href="#" data-target="hub-section"><i class="fas fa-th"></i> HUB</a>
        </nav>
    </div>
    <div class="tabs">
        <button class="tab active" data-target="reading-list-section">Lendo</button>
        <button class="tab" data-target="finished-list-section">Lidos</button>
        <button class="tab" data-target="future-list-section">Ler Futuramente</button>
        <button class="tab" data-target="favorites-list-section">Favoritos</button>
        <button class="tab" data-target="tools-section">Ferramentas</button>
        <button class="tab" data-target="hub-section">HUB</button>
    </div>
    <main>
        <section id="reading-list-section" class="content-section">
            <h2>Minha Lista "Lendo" <span class="section-counter" id="reading-counter">(0)</span></h2>
            <div id="reading-manga-list" class="manga-grid">
                <p id="no-manga-message-reading">Nenhum manhwa/mangá com status "Lendo" cadastrado ainda.</p>
            </div>
        </section>
        <section id="finished-list-section" class="content-section hidden">
            <h2>Minha Lista "Lidos" <span class="section-counter" id="finished-counter">(0)</span></h2>
            <div id="finished-manga-list" class="manga-grid">
                <p id="no-manga-message-finished">Nenhum manhwa/mangá com status "Lido" cadastrado ainda.</p>
            </div>
        </section>
        <section id="future-list-section" class="content-section hidden">
            <h2>Lista de Leitura Futuramente<span class="section-counter" id="future-counter">(0)</span></h2>
            <div id="future-manga-list" class="manga-grid">
                <p id="no-manga-message-future">Nenhum manhwa/mangá com status "Ler Futuramente" cadastrado ainda.</p>
            </div>
        </section>
        <section id="favorites-list-section" class="content-section hidden">
            <h2>Lista de Favoritos <span class="section-counter" id="favorites-counter">(0)</span></h2>
            <div id="favorites-manga-list" class="manga-grid">
                <p id="no-manga-message-favorites">Nenhum manhwa/mangá adicionado aos favoritos ainda.</p>
            </div>
        </section>
        <section id="tools-section" class="content-section hidden">
            <h2>Ferramentas do Gerenciador</h2>
            <div class="tools-buttons-container">
                <button class="tool-btn" data-tool-target="add-manga-sub-section">Cadastrar Manhwa/Mangá</button>
                <button class="tool-btn" data-tool-target="backup-restore-sub-section">Gerenciar Backup</button>
                <button class="tool-btn" data-tool-target="notes-sub-section">Criar / Ver Notas</button>
            </div>
            <div id="add-manga-sub-section" class="sub-section-container hidden">
                <h3>Formulário de Cadastro</h3>
                <form id="manga-form" style="width: 100%;">
                    <div class="form-group">
                        <label for="manga-title">Título:</label>
                        <input type="text" id="manga-title" required>
                    </div>
                    <div class="form-group">
                        <label for="manga-link">Link de Leitura:</label>
                        <input type="url" id="manga-link" placeholder="Ex: https://seusitemanga.com/titulo" required>
                    </div>
                    <div class="form-group">
                        <label for="manga-image-link">Link da Imagem da Capa (Opcional):</label>
                        <input type="url" id="manga-image-link" placeholder="Ex: https://imagem.com/capa.jpg">
                    </div>
                    <div class="form-group">
                        <label for="manga-last-chapter">Último Capítulo Lido:</label>
                        <input type="text" id="manga-last-chapter" value="0" pattern="[0-9]+(\.[0-9]+)?" title="Por favor, insira um número inteiro ou decimal." required>
                    </div>
                    <div class="form-group">
                        <label for="manga-total-chapters">Total de Capítulos Lançados:</label>
                        <input type="text" id="manga-total-chapters" value="0" pattern="[0-9]+(\.[0-9]+)?" title="Por favor, insira um número inteiro ou decimal." required>
                    </div>
                    <div class="form-group">
                        <label for="manga-status">Status:</label>
                        <select id="manga-status" required>
                            <option value="reading">Lendo</option>
                            <option value="finished">Lido</option>
                            <option value="future">Ler Futuramente</option>
                        </select>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="manga-is-favorite">
                        <label for="manga-is-favorite">Adicionar aos Favoritos</label>
                    </div>
                    <div class="form-action-group" style="margin-top: 2rem;">
                        <button type="submit" class="tool-btn" style="max-width: none;">Adicionar Manhwa</button>
                    </div>
                </form>
            </div>
            <div id="backup-restore-sub-section" class="sub-section-container hidden centered-content">
                <h3>Gerenciar Backup</h3>
                <p>Clique em "Fazer Backup" para baixar seus dados em um arquivo JSON. O arquivo será salvo na sua pasta de downloads padrão.</p>
                <button id="export-mangas-btn" class="tool-btn">Fazer Backup</button>
                <p style="margin-top: 20px;">Clique em "Restaurar Backup" para selecionar um arquivo JSON do seu computador e carregar os dados. Isso substituirá todos os dados atuais.</p>
                <input type="file" id="file-input-backup" accept=".json" style="display: none;">
                <button id="select-file-backup-btn" class="tool-btn">Restaurar Backup</button>
                <span id="selected-file-name" style="margin-top: 10px; color: var(--text-color-futuristic); font-size: 0.9em;">Nenhum arquivo selecionado.</span>
            </div>
            <div id="notes-sub-section" class="sub-section-container hidden">
                <h3>Minhas Notas</h3>
                <form id="notes-form" style="width: 100%;">
                    <div class="form-group">
                        <label for="note-content">Escreva sua nota aqui:</label>
                        <textarea id="note-content" rows="10" placeholder="Escreva aqui..." required></textarea>
                    </div>
                    <div class="form-action-group" style="margin-top: 2rem;">
                        <button type="submit" class="tool-btn" style="max-width: none;">Salvar Nota</button>
                    </div>
                </form>
                <div id="notes-list" class="notes-list">
                    <p id="no-notes-message">Nenhuma nota salva ainda.</p>
                </div>
            </div>
        </section>
        <section id="hub-section" class="content-section hidden">
            <h2>HUB</h2>
            <div class="tools-buttons-container">
                <button class="tool-btn" id="buscar-cards-btn">Buscar Cards</button>
                <button class="tool-btn" id="news-btn">News Animes/Mangás</button>
                <button class="tool-btn" data-tool-target="changelog-sub-section">Change Log</button>
            </div>
            <div id="changelog-sub-section" class="sub-section-container hidden">
                <h3>Change Log</h3>
                <div id="changelog-list" class="notes-list"></div>
            </div>
        </section>
    </main>
    <footer>
        <p>Desenvolvido por Edson C.S.F.</p>
        <p>Contato: edsony1@gmail.com</p>
        <p>Criação: Julho de 2025</p>
        <p>Versão: V3.6Final</p> <p>&copy; 2025. Todos os direitos reservados.</p>
    </footer>
    <div id="editMangaModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Editar Manhwa/Mangá</h2>
            <form id="edit-manga-form">
                <input type="hidden" id="edit-manga-id">
                <div class="form-group">
                    <label for="edit-manga-title">Título:</label>
                    <input type="text" id="edit-manga-title" required>
                </div>
                <div class="form-group">
                    <label for="edit-manga-link">Link de Leitura:</label>
                    <input type="url" id="edit-manga-link" required>
                </div>
                <div class="form-group">
                    <label for="edit-manga-image-link">Link da Imagem da Capa (Opcional):</label>
                    <input type="url" id="edit-manga-image-link">
                </div>
                <div class="form-group">
                    <label for="edit-manga-last-chapter">Último Capítulo Lido:</label>
                    <input type="text" id="edit-manga-last-chapter" pattern="[0-9]+(\.[0-9]+)?" title="Por favor, insira um número inteiro ou decimal." required>
                </div>
                <div class="form-group">
                    <label for="edit-manga-total-chapters">Total de Capítulos Lançados:</label>
                    <input type="text" id="edit-manga-total-chapters" pattern="[0-9]+(\.[0-9]+)?" title="Por favor, insira um número inteiro ou decimal." required>
                </div>
                <div class="form-group">
                    <label for="edit-manga-status">Status:</label>
                    <select id="edit-manga-status" required>
                        <option value="reading">Lendo</option>
                        <option value="finished">Lido</option>
                        <option value="future">Ler Futuramente</option>
                    </select>
                </div>
                 <div class="checkbox-container">
                    <input type="checkbox" id="edit-manga-is-favorite">
                    <label for="edit-manga-is-favorite">Adicionar aos Favoritos</label>
                </div>
                <button type="submit">Salvar Alterações</button>
            </form>
        </div>
    </div>
    <div id="notification" class="notification">
        <span id="notification-message"></span>
        <button id="close-notification">&times;</button>
    </div>
    <script>
        // Variáveis globais
        const tabs = document.querySelectorAll('.tab');
        const contentSections = document.querySelectorAll('.content-section');
        const mangaForm = document.getElementById('manga-form');
        const readingMangaListDiv = document.getElementById('reading-manga-list');
        const finishedMangaListDiv = document.getElementById('finished-manga-list');
        const futureMangaListDiv = document.getElementById('future-manga-list');
        const favoritesMangaListDiv = document.getElementById('favorites-manga-list');
        // Contadores
        const readingCounter = document.getElementById('reading-counter');
        const finishedCounter = document.getElementById('finished-counter');
        const futureCounter = document.getElementById('future-counter');
        const favoritesCounter = document.getElementById('favorites-counter');
        const noMangaMessageReading = document.getElementById('no-manga-message-reading');
        const noMangaMessageFinished = document.getElementById('no-manga-message-finished');
        const noMangaMessageFuture = document.getElementById('no-manga-message-future');
        const noMangaMessageFavorites = document.getElementById('no-manga-message-favorites');
        const fileInputBackup = document.getElementById('file-input-backup');
        const selectFileBackupBtn = document.getElementById('select-file-backup-btn');
        const selectedFileNameSpan = document.getElementById('selected-file-name');
        const exportMangasBtn = document.getElementById('export-mangas-btn');
        const editMangaModal = document.getElementById('editMangaModal');
        const closeButton = document.querySelector('.close-button');
        const editMangaForm = document.getElementById('edit-manga-form');
        const toolButtons = document.querySelectorAll('.tool-btn');
        const toolSubSections = document.querySelectorAll('.sub-section-container');
        // Menu Mobile
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileNav = document.getElementById('mobile-nav');
        // Sistema de Notificações
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notification-message');
        const closeNotificationBtn = document.getElementById('close-notification');
        let mangas = JSON.parse(localStorage.getItem('mangas')) || [];
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let changelogs = [
            { date: '00/00/2025', version: 'V ??', changes: ' - Aguarde novas att' },
            { date: '18/09/2025', version: 'V 3.6Final', changes: ' - Adicionado botão + capítulos lancados Zica chorão' },
         { date: '31/08/2025', version: 'V3.6d', changes: ' - Mudança do título com imagem com avatar  e imagem genérica do card quando não tiver link' },
            { date: '30/08/2025', version: 'V3.6a', changes: '- Atualizaçao importar  e buscar cards na nuvem servidor firebase também evitando duplicação ao enviar e buscar ,Dica antes de testar as funções novas criar um novo backup' },
            { date: '26/08/2025', version: 'V3.5', changes: '- Redesenho completo do layout dos cards: removidas margens para melhor aproveitamento de espaço, aumentado o tamanho das imagens dos capas para melhor visualização, reorganizados os elementos dos cards (botões, barra de progresso e data da última leitura) em um layout mais compacto. Mantida todas as funcionalidades originais e compatibilidade com o sistema existente.' },
            { date: '23/08/2025', version: 'V3.4', changes: '- Gmanhwa News e Change Log Funcional.Adicionado sistema de notas.Implementado sistema de favoritos.Ajustado largura dos cards para melhor aproveitamento de espaço em telas mobile. Alinhados ícones no rodapé dos cards para melhor organização visual. Substituição de botões de texto por ícones para uma interface mais limpa e intuitiva.' },
             { date: '15/08/2025', version: 'V3.3', changes: '- Adicionado HUB com botões Buscar Cards, News e Change Log. Removido botão Importar Cards e função de Compartilhar nos cards.' },
             { date: '05/08/2025', version: 'V3.0', changes: '- Redesign completo da interface.Implementação do sistema de backup' },
             { date: '01/08/2025', version: 'V3.1', changes: '- Versão da última atualização antes do chabglog com funcionalidades principais.' },
             { date: '20/07/2025', version: 'V2.0', changes: '- Implementação da barra de progresso.Adicionado suporte a diferentes status de leitura' }
        ];
        // --- Funções para o sistema de notificações ---
        function showNotification(message, duration = 3000) {
            notificationMessage.textContent = message;
            notification.style.display = 'flex';
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }
        closeNotificationBtn.addEventListener('click', () => {
            notification.style.display = 'none';
        });
        // --- Funções para o menu mobile ---
        function initMobileMenu() {
            if (!mobileMenuBtn || !mobileNav) {
                console.error('Elementos do menu mobile não encontrados');
                return;
            }
            mobileMenuBtn.addEventListener('click', () => {
                mobileNav.classList.toggle('show');
            });
            // Correção: usar event delegation para os links do menu mobile
            mobileNav.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (link) {
                    e.preventDefault();
                    const target = link.getAttribute('data-target');
                    showTabContent(target);
                    mobileNav.classList.remove('show');
                }
            });
        }
        // --- Funções para o sistema de abas ---
        function hideAllContentSections() {
            contentSections.forEach(section => {
                section.classList.add('hidden');
            });
        }
        function removeActiveClassFromTabs() {
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            // Remover classe ativa do menu mobile
            document.querySelectorAll('.mobile-nav a').forEach(link => {
                link.classList.remove('active');
            });
        }
        function showTabContent(targetId) {
            hideAllContentSections();
            removeActiveClassFromTabs();
            const targetSection = document.getElementById(targetId);
            const targetTab = document.querySelector(`.tab[data-target="${targetId}"]`);
            const targetMobileLink = document.querySelector(`.mobile-nav a[data-target="${targetId}"]`);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            if (targetTab) {
                targetTab.classList.add('active');
            }
            if (targetMobileLink) {
                targetMobileLink.classList.add('active');
            }
        }
        // --- Funções para a aba de Ferramentas ---
        function hideAllToolSubSections() {
            toolSubSections.forEach(section => {
                section.classList.add('hidden');
            });
        }
        function showToolSubSection(targetId) {
            hideAllToolSubSections();
            const targetSubSection = document.getElementById(targetId);
            if (targetSubSection) {
                targetSubSection.classList.remove('hidden');
            }
            // Chama a renderização das notas quando a subseção de notas é exibida
            if (targetId === 'notes-sub-section') {
                renderNotes();
            }
            if (targetId === 'changelog-sub-section') {
                renderChangelog();
            }
        }
        // --- Funções de Utilitário ---
        function saveMangas() {
            localStorage.setItem('mangas', JSON.stringify(mangas));
        }
        function saveNotes() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }
        // --- Função para calcular porcentagem de progresso ---
        function calculateProgress(lastChapter, totalChapters) {
            const last = parseFloat(lastChapter);
            const total = parseFloat(totalChapters);
            if (total === 0) return 0;
            if (last >= total) return 100;
            return Math.round((last / total) * 100);
        }
        // --- Função para atualizar contadores ---
        function updateCounters() {
            const readingCount = mangas.filter(m => m.status === 'reading').length;
            const finishedCount = mangas.filter(m => m.status === 'finished').length;
            const futureCount = mangas.filter(m => m.status === 'future').length;
            const favoritesCount = mangas.filter(m => m.isFavorite).length;
            readingCounter.textContent = `(${readingCount})`;
            finishedCounter.textContent = `(${finishedCount})`;
            futureCounter.textContent = `(${futureCount})`;
            favoritesCounter.textContent = `(${favoritesCount})`;
        }
        function createMangaCard(manga) {
            const card = document.createElement('div');
            card.classList.add('manga-card');
            card.dataset.id = manga.id;
            let imageContentHtml = '';
            if (manga.imageLink && manga.imageLink.trim() !== '' && manga.imageLink.startsWith('http')) {
                imageContentHtml = `<img src="${manga.imageLink}" alt="${manga.title}" class="manga-card-image" loading="lazy">`;
            } else {
                // Usando a imagem padrão "capacard.jpg" quando não há link de imagem ou o link está vazio
                imageContentHtml = `<img src="./imagens/capacard.jpg" alt="Capa Indisponível" class="manga-card-image" loading="lazy">`;
            }
            let mainActionButton = '';
            if (manga.status === 'reading') {
                mainActionButton = `<button class="btn toggle-status-btn" data-id="${manga.id}">Marcar como Lido</button>`;
            } else if (manga.status === 'finished') {
                mainActionButton = `<button class="btn toggle-status-btn" data-id="${manga.id}">Marcar como Lendo</button>`;
            } else if (manga.status === 'future') {
                mainActionButton = `<button class="btn btn-move-to-reading" data-id="${manga.id}">Mover para Lendo</button>`;
            }
            const favoriteButtonClass = manga.isFavorite ? 'active' : '';
            const progressPercentage = calculateProgress(manga.lastChapter, manga.totalChapters);
            card.innerHTML = `
                <div class="manga-card-image-wrapper">
                    ${imageContentHtml}
                </div>
                <h3 class="manga-title">${manga.title}</h3>
                <div class="manga-progress-container">
                    <p class="manga-progress">Lido: <span id="chapter-${manga.id}">${manga.lastChapter}</span>/<span id="total-chapters-${manga.id}">${manga.totalChapters === 0 ? '???' : manga.totalChapters}</span></p>
                    ${manga.status === 'reading' ? `<button class="btn-increment-chapter" data-id="${manga.id}" data-target="last">+</button>` : ''}
                    <!-- INÍCIO DA ALTERAÇÃO -->
                    ${manga.status === 'reading' ? `<button class="btn-increment-chapter" data-id="${manga.id}" data-target="total" style="background-color: #3498db;">+</button>` : ''}
                    <!-- FIM DA ALTERAÇÃO -->
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" style="width: ${progressPercentage}%"></div>
                </div>
                <p class="progress-percentage">${progressPercentage}% completo</p>
                <p class="manga-last-read">Última Leitura: <span id="date-${manga.id}">${manga.lastReadDate}</span></p>
                <div class="manga-actions">
                    <button class="btn btn-favorite ${favoriteButtonClass}" data-id="${manga.id}" title="Favorito"><i class="fas fa-star"></i></button>
                    <a href="${manga.link}" target="_blank" class="btn btn-access" title="Acessar"><i class="fas fa-external-link-alt"></i></a>
                    ${mainActionButton}
                    <button class="btn btn-edit" data-id="${manga.id}" title="Editar"><i class="fas fa-edit"></i></button>
                    <button class="btn btn-delete" data-id="${manga.id}" title="Excluir"><i class="fas fa-trash"></i></button>
                    <button class="btn btn-share" data-id="${manga.id}" title="Compartilhar"><i class="fas fa-share-alt"></i></button>
                </div>
            `;
            // Tratamento de erro para imagens externas
            if (manga.imageLink && manga.imageLink.trim() !== '' && manga.imageLink.startsWith('http')) {
                const imgElement = card.querySelector('.manga-card-image');
                imgElement.onerror = () => {
                    // Se a imagem externa falhar, usar a imagem padrão
                    imgElement.src = "./imagens/capacard.jpg";
                    imgElement.alt = "Capa Indisponível";
                };
            }
            // Garantir que a imagem padrão também tenha tratamento de erro
            const defaultImgElement = card.querySelector('.manga-card-image[src="./imagens/capacard.jpg"]');
            if (defaultImgElement) {
                defaultImgElement.onerror = () => {
                    // Se a imagem padrão também falhar, mostrar texto de fallback
                    const wrapper = card.querySelector('.manga-card-image-wrapper');
                    wrapper.innerHTML = `
                        <div class="manga-card-placeholder-text">
                            <p>Capa</p>
                            <p>Indisponível</p>
                        </div>
                    `;
                };
            }
            // Eventos do card
            card.querySelector('.btn-favorite').addEventListener('click', (e) => {
                const mangaId = e.currentTarget.dataset.id;
                const currentManga = mangas.find(m => m.id === mangaId);
                if (currentManga) {
                    currentManga.isFavorite = !currentManga.isFavorite;
                    saveMangas();
                    renderMangas();
                    showNotification(currentManga.isFavorite ? 'Adicionado aos favoritos!' : 'Removido dos favoritos!');
                }
            });
            const toggleStatusBtn = card.querySelector('.toggle-status-btn');
            if (toggleStatusBtn) {
                 toggleStatusBtn.addEventListener('click', (e) => {
                    const mangaId = e.target.dataset.id;
                    const currentManga = mangas.find(m => m.id === mangaId);
                    if (currentManga) {
                        const newStatus = currentManga.status === 'reading' ? 'finished' : 'reading';
                        currentManga.status = newStatus;
                        saveMangas();
                        renderMangas();
                        showNotification(`Status alterado para ${newStatus === 'reading' ? 'Lendo' : 'Lido'}!`);
                    }
                });
            }
            const moveToReadingBtn = card.querySelector('.btn-move-to-reading');
            if (moveToReadingBtn) {
                moveToReadingBtn.addEventListener('click', (e) => {
                    const mangaId = e.target.dataset.id;
                    const currentManga = mangas.find(m => m.id === mangaId);
                    if (currentManga) {
                        currentManga.status = 'reading';
                        saveMangas();
                        renderMangas();
                        showNotification('Movido para "Lendo"!');
                    }
                });
            }
            // INÍCIO DA ALTERAÇÃO
            const chapterUpBtns = card.querySelectorAll('.btn-increment-chapter');
            if (chapterUpBtns.length > 0) {
                chapterUpBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const mangaId = e.currentTarget.dataset.id;
                        const targetField = e.currentTarget.dataset.target; // 'last' ou 'total'
                        const currentManga = mangas.find(m => m.id === mangaId);
                        if (currentManga) {
                            if (targetField === 'last') {
                                let currentChapter = parseFloat(currentManga.lastChapter);
                                let totalChapters = parseFloat(currentManga.totalChapters);
                                if (currentChapter < totalChapters || totalChapters === 0) {
                                    currentChapter += 1;
                                    currentManga.lastChapter = currentChapter.toString();
                                    currentManga.lastReadDate = new Date().toLocaleDateString('pt-BR');
                                    saveMangas();
                                    renderMangas();
                                }
                            } else if (targetField === 'total') {
                                let totalChapters = parseFloat(currentManga.totalChapters);
                                totalChapters += 1;
                                currentManga.totalChapters = totalChapters.toString();
                                saveMangas();
                                renderMangas();
                            }
                        }
                    });
                });
            }
            // FIM DA ALTERAÇÃO
            // Adicionar evento para o botão de compartilhar (sem ação)
            const shareBtn = card.querySelector('.btn-share');
            if (shareBtn) {
                shareBtn.addEventListener('click', (e) => {
                    // Sem ação por enquanto, apenas para exibir o ícone
                    compartilharCard(manga);
                });
            }
            card.querySelector('.btn-edit').addEventListener('click', (e) => {
                const mangaId = e.target.dataset.id;
                const mangaToEdit = mangas.find(m => m.id === mangaId);
                if (mangaToEdit) {
                    document.getElementById('edit-manga-id').value = mangaToEdit.id;
                    document.getElementById('edit-manga-title').value = mangaToEdit.title;
                    document.getElementById('edit-manga-link').value = mangaToEdit.link;
                    document.getElementById('edit-manga-image-link').value = mangaToEdit.imageLink;
                    document.getElementById('edit-manga-last-chapter').value = mangaToEdit.lastChapter;
                    document.getElementById('edit-manga-total-chapters').value = mangaToEdit.totalChapters;
                    document.getElementById('edit-manga-status').value = mangaToEdit.status;
                    document.getElementById('edit-manga-is-favorite').checked = mangaToEdit.isFavorite;
                    editMangaModal.style.display = 'block';
                }
            });
            card.querySelector('.btn-delete').addEventListener('click', (e) => {
                const mangaId = e.target.dataset.id;
                if (confirm('Tem certeza que deseja excluir este manhwa/mangá da sua lista?')) {
                    mangas = mangas.filter(m => m.id !== mangaId);
                    saveMangas();
                    renderMangas();
                    showNotification('Manhwa/Mangá excluído com sucesso!');
                }
            });
            return card;
        }
        function createNoteCard(note) {
            const noteCard = document.createElement('div');
            noteCard.classList.add('note-card');
            noteCard.dataset.id = note.id;
            noteCard.innerHTML = `
                <p>${note.content}</p>
                <div class="note-actions">
                    <button class="btn-edit-note" data-id="${note.id}">Editar</button>
                    <button class="btn-delete-note" data-id="${note.id}">Excluir</button>
                </div>
            `;
            noteCard.querySelector('.btn-edit-note').addEventListener('click', (e) => {
                const noteId = e.target.dataset.id;
                const noteToEdit = notes.find(n => n.id === noteId);
                if (noteToEdit) {
                    const notesForm = document.getElementById('notes-form');
                    document.getElementById('note-content').value = noteToEdit.content;
                    notesForm.dataset.editingId = noteToEdit.id;
                    showNotification('Nota carregada para edição no formulário acima.');
                }
            });
            noteCard.querySelector('.btn-delete-note').addEventListener('click', (e) => {
                const noteId = e.target.dataset.id;
                if (confirm('Tem certeza que deseja excluir esta nota?')) {
                    notes = notes.filter(n => n.id !== noteId);
                    saveNotes();
                    renderNotes();
                    showNotification('Nota excluída com sucesso!');
                }
            });
            return noteCard;
        }
        function renderMangas() {
            readingMangaListDiv.innerHTML = '';
            finishedMangaListDiv.innerHTML = '';
            futureMangaListDiv.innerHTML = '';
            favoritesMangaListDiv.innerHTML = '';
            const readingMangas = mangas.filter(m => m.status === 'reading').sort((a, b) => a.title.localeCompare(b.title));
            const finishedMangas = mangas.filter(m => m.status === 'finished').sort((a, b) => a.title.localeCompare(b.title));
            const futureMangas = mangas.filter(m => m.status === 'future').sort((a, b) => a.title.localeCompare(b.title));
            const favoriteMangas = mangas.filter(m => m.isFavorite).sort((a, b) => a.title.localeCompare(b.title));
            if (readingMangas.length === 0) {
                noMangaMessageReading.style.display = 'block';
            } else {
                noMangaMessageReading.style.display = 'none';
                readingMangas.forEach(manga => { readingMangaListDiv.appendChild(createMangaCard(manga)); });
            }
            if (finishedMangas.length === 0) {
                noMangaMessageFinished.style.display = 'block';
            } else {
                noMangaMessageFinished.style.display = 'none';
                finishedMangas.forEach(manga => { finishedMangaListDiv.appendChild(createMangaCard(manga)); });
            }
            if (futureMangas.length === 0) {
                noMangaMessageFuture.style.display = 'block';
            } else {
                noMangaMessageFuture.style.display = 'none';
                futureMangas.forEach(manga => { futureMangaListDiv.appendChild(createMangaCard(manga)); });
            }
            if (favoriteMangas.length === 0) {
                noMangaMessageFavorites.style.display = 'block';
            } else {
                noMangaMessageFavorites.style.display = 'none';
                favoriteMangas.forEach(manga => { favoritesMangaListDiv.appendChild(createMangaCard(manga)); });
            }
            // Atualizar contadores
            updateCounters();
        }
        function renderNotes() {
            const notesListDiv = document.getElementById('notes-list');
            notesListDiv.innerHTML = '';
            if (notes.length === 0) {
                notesListDiv.innerHTML = '<p id="no-notes-message">Nenhuma nota salva ainda.</p>';
            } else {
                notes.sort((a, b) => new Date(b.createdDate) - new Date(a.createdDate));
                notes.forEach(note => {
                    notesListDiv.appendChild(createNoteCard(note));
                });
            }
        }
        function renderChangelog() {
            const changelogListDiv = document.getElementById('changelog-list');
            changelogListDiv.innerHTML = '';
            changelogs.sort((a, b) => new Date(b.date) - new Date(a.date));
            changelogs.forEach(log => {
                const logCard = document.createElement('div');
                logCard.classList.add('note-card');
                logCard.innerHTML = `
                    <h4>${log.date} - ${log.version}</h4>
                    <p>${log.changes}</p>
                `;
                changelogListDiv.appendChild(logCard);
            });
        }
        function exportMangasToFile() {
            const backupData = JSON.stringify(mangas, null, 2);
            const blob = new Blob([backupData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `manga_backup_${new Date().toISOString().slice(0,10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('Backup baixado com sucesso!');
        }
        function importMangasFromFile(event) {
            const file = event.target.files[0];
            if (!file) {
                selectedFileNameSpan.textContent = 'Nenhum arquivo selecionado.';
                return;
            }
            selectedFileNameSpan.textContent = `Arquivo selecionado: ${file.name}`;
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const fileContent = e.target.result;
                    const parsedData = JSON.parse(fileContent);
                    if (Array.isArray(parsedData)) {
                        if (confirm('Tem certeza que deseja carregar este backup? Isso substituirá todos os seus dados atuais.')) {
                            mangas = parsedData;
                            saveMangas();
                            renderMangas();
                            showNotification('Backup carregado com sucesso!');
                            fileInputBackup.value = '';
                            selectedFileNameSpan.textContent = 'Nenhum arquivo selecionado.';
                            showTabContent('reading-list-section');
                        }
                    } else {
                        showNotification('Formato de backup inválido. Certifique-se de que é um JSON válido de um array de mangás.');
                    }
                } catch (error) {
                    showNotification('Erro ao analisar o arquivo de backup. Certifique-se de que o arquivo é um JSON válido.');
                    console.error('Erro ao carregar backup do arquivo:', error);
                }
            };
            reader.onerror = (e) => {
                showNotification('Erro ao ler o arquivo.');
                console.error('Erro ao ler arquivo:', e.target.error);
            };
            reader.readAsText(file);
        }
        // --- Event Listeners Globais ---
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                showTabContent(tab.dataset.target);
            });
        });
        toolButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetId = button.dataset.toolTarget;
                if (targetId) {
                    showToolSubSection(targetId);
                }
            });
        });
        exportMangasBtn.addEventListener('click', exportMangasToFile);
        selectFileBackupBtn.addEventListener('click', () => { fileInputBackup.click(); });
        fileInputBackup.addEventListener('change', importMangasFromFile);
        mangaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('manga-title').value;
            const link = document.getElementById('manga-link').value;
            const imageLink = document.getElementById('manga-image-link').value;
            let lastChapter = parseFloat(document.getElementById('manga-last-chapter').value.replace(',', '.')) || 0;
            let totalChapters = parseFloat(document.getElementById('manga-total-chapters').value.replace(',', '.')) || 0;
            const status = document.getElementById('manga-status').value;
            const isFavorite = document.getElementById('manga-is-favorite').checked;
            const currentDate = new Date().toLocaleDateString('pt-BR');
            if (totalChapters !== 0 && lastChapter > totalChapters) {
                lastChapter = totalChapters;
            }
            const formattedLastChapter = lastChapter % 1 === 0 ? parseInt(lastChapter).toString() : lastChapter.toFixed(1);
            const formattedTotalChapters = totalChapters % 1 === 0 ? parseInt(totalChapters).toString() : totalChapters.toFixed(1);
            const newManga = {
                id: Date.now().toString(),
                title,
                link,
                imageLink,
                lastChapter: formattedLastChapter,
                totalChapters: formattedTotalChapters,
                lastReadDate: currentDate,
                status,
                isFavorite
            };
            mangas.push(newManga);
            saveMangas();
            renderMangas();
            mangaForm.reset();
            document.getElementById('manga-last-chapter').value = '0';
            document.getElementById('manga-total-chapters').value = '0';
            document.getElementById('manga-status').value = 'reading';
            document.getElementById('manga-is-favorite').checked = false;
            showNotification('Manhwa/Mangá adicionado com sucesso!');
            showTabContent(newManga.status === 'reading' ? 'reading-list-section' : 
                          (newManga.status === 'finished' ? 'finished-list-section' : 'future-list-section'));
        });
        closeButton.addEventListener('click', () => {
            editMangaModal.style.display = 'none';
        });
        window.addEventListener('click', (event) => {
            if (event.target == editMangaModal) {
                editMangaModal.style.display = 'none';
            }
        });
        editMangaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const mangaId = document.getElementById('edit-manga-id').value;
            const updatedTitle = document.getElementById('edit-manga-title').value;
            const updatedLink = document.getElementById('edit-manga-link').value;
            const updatedImageLink = document.getElementById('edit-manga-image-link').value;
            let updatedLastChapter = parseFloat(document.getElementById('edit-manga-last-chapter').value.replace(',', '.')) || 0;
            let updatedTotalChapters = parseFloat(document.getElementById('edit-manga-total-chapters').value.replace(',', '.')) || 0;
            const updatedStatus = document.getElementById('edit-manga-status').value;
            const updatedIsFavorite = document.getElementById('edit-manga-is-favorite').checked;
            if (updatedTotalChapters !== 0 && updatedLastChapter > updatedTotalChapters) {
                updatedLastChapter = updatedTotalChapters;
            }
            const formattedUpdatedLastChapter = updatedLastChapter % 1 === 0 ? parseInt(updatedLastChapter).toString() : updatedLastChapter.toFixed(1);
            const formattedUpdatedTotalChapters = updatedTotalChapters % 1 === 0 ? parseInt(updatedTotalChapters).toString() : updatedTotalChapters.toFixed(1);
            const index = mangas.findIndex(m => m.id === mangaId);
            if (index !== -1) {
                mangas[index].title = updatedTitle;
                mangas[index].link = updatedLink;
                mangas[index].imageLink = updatedImageLink;
                mangas[index].lastChapter = formattedUpdatedLastChapter;
                mangas[index].totalChapters = formattedUpdatedTotalChapters;
                mangas[index].status = updatedStatus;
                mangas[index].isFavorite = updatedIsFavorite;
                saveMangas();
                renderMangas();
                editMangaModal.style.display = 'none';
                showNotification('Manhwa/Mangá atualizado com sucesso!');
                const activeTab = document.querySelector('.tab.active').dataset.target;
                if (activeTab === 'favorites-list-section') {
                    if (!updatedIsFavorite) {
                        showTabContent('reading-list-section');
                    } else {
                        showTabContent('favorites-list-section');
                    }
                } else {
                    showTabContent(updatedStatus === 'reading' ? 'reading-list-section' : 
                                  (updatedStatus === 'finished' ? 'finished-list-section' : 'future-list-section'));
                }
            }
        });
        const notesForm = document.getElementById('notes-form');
        notesForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const content = document.getElementById('note-content').value;
            const editingId = notesForm.dataset.editingId;
            if (editingId) {
                // Modo de edição
                const noteIndex = notes.findIndex(n => n.id === editingId);
                if (noteIndex !== -1) {
                    notes[noteIndex].content = content;
                }
                notesForm.removeAttribute('data-editing-id');
                showNotification('Nota editada com sucesso!');
            } else {
                // Modo de criação
                const newNote = {
                    id: Date.now().toString(),
                    content: content,
                    createdDate: new Date().toLocaleDateString('pt-BR')
                };
                notes.push(newNote);
                showNotification('Nota salva com sucesso!');
            }
            saveNotes();
            renderNotes();
            notesForm.reset();
        });
        document.getElementById('news-btn').addEventListener('click', () => {
            window.open('https://dashboardedsoncsf.netlify.app/gmanhwanews%20v1.2'); // Coloque o link do site de notícias aqui
        });
        // --- Inicialização da Aplicação ---
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar menu mobile
            initMobileMenu();
            // Renderizar dados iniciais
            renderMangas();
            showTabContent('reading-list-section');
        });
    </script>
</body>
</html>
